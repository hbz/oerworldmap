{
  "id": "#",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "oneOf": [
    {
      "$ref": "#/definitions/LikeAction"
    },
    {
      "$ref": "#/definitions/LighthouseAction"
    }
  ],
  "definitions": {
    "Link": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "A link to another entity",
      "type": "object",
      "properties": {
        "@id": {
          "description": "The referenced entities unique identifier",
          "type": "string",
          "format": "uri"
        },
        "@type": {
          "type": "string"
        }
      },
      "required": ["@id", "@type"]
    },
    "WebPage": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Bookmark",
      "description": "A bookmark",
      "type": "object",
      "properties": {
        "@context": {
          "type": "string",
          "format": "uri"
        },
        "@id": {
          "type": "string",
          "format": "uri"
        },
        "@type": {
          "type": "string",
          "enum": [
            "WebPage"
          ]
        },
        "name": {
          "$ref": "#/definitions/LocalizedString"
        },
        "description": {
          "$ref": "#/definitions/LocalizedString"
        },
        "url": {
          "type": "string",
          "format": "uri"
        },
        "keywords": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "publisher": {
          "description": "The publisher of the bookmark",
          "type": "array",
          "items": {
            "allOf": [
              { "$ref": "#/definitions/Link" },
              { "properties": { "@type": { "enum": [ "Person", "Organization", "Event", "Action", "Service" ] } } }
            ]
          }
        },
        "comment": {
          "description": "A comment about the bookmark",
          "type": "array",
          "items": {
            "allOf": [
              { "$ref": "#/definitions/Link" },
              { "properties": { "@type": { "enum": [ "Comment" ] } } }
            ]
          }
        }
      },
      "required": [ "name", "url" ],
      "additionalProperties": false
    },
    "LikeAction": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Like action",
      "description": "An action indicating that an agent likes an object",
      "type": "object",
      "properties": {
        "@context": {
          "type": "string",
          "format": "uri"
        },
        "@id": {
          "description": "The like action's unique identifier",
          "type": "string",
          "format": "uri"
        },
        "@type": {
          "type": "string",
          "enum": [
            "LikeAction"
          ]
        },
        "agent": {
          "description": "The agent of the like action",
          "type": "object",
          "allOf": [
            { "$ref": "#/definitions/Link" },
            { "properties": { "@type": { "enum": [ "Person" ] } } }
          ]
        },
        "object": {
          "description": "The object of the like action",
          "type": "object",
          "allOf": [
            { "$ref": "#/definitions/Link" },
            { "properties": { "@type": { "enum": [ "Organization", "Action", "Service" ] } } }
          ]
        },
        "startTime": {
          "$ref": "#/definitions/iso-8601-date"
        }
      },
      "required": [ "agent", "object", "startTime" ],
      "additionalProperties": false
    },
    "LighthouseAction": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "Lighthouse action",
      "description": "An action indicating that an object is considered a lighthouse by an agent",
      "type": "object",
      "properties": {
        "@context": {
          "type": "string",
          "format": "uri"
        },
        "@id": {
          "description": "The like action's unique identifier",
          "type": "string",
          "format": "uri"
        },
        "@type": {
          "type": "string",
          "enum": [
            "LighthouseAction"
          ]
        },
        "agent": {
          "description": "The agent of the like action",
          "type": "array",
          "items": {
            "allOf": [
              { "$ref": "#/definitions/Link" },
              { "properties": { "@type": { "enum": [ "Person" ] } } }
            ]
          }
        },
        "object": {
          "description": "The object of the like action",
          "type": "object",
          "allOf": [
            { "$ref": "#/definitions/Link" },
            { "properties": { "@type": { "enum": [ "Organization", "Action", "Service" ] } } }
          ]
        },
        "description": {
          "$ref": "#/definitions/LocalizedString"
        },
        "startTime": {
          "$ref": "#/definitions/iso-8601-date"
        }
      },
      "required": [ "agent", "object", "description" ],
      "additionalProperties": false
    },
    "iso-8601-date": {
      "$schema": "http://json-schema.org/draft-04/schema#",
      "title": "ISO 8601 Date",
      "description": "A date in ISO 8601 format.",
      "type": "string",
      "pattern": "^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$"
    }
  }
}
