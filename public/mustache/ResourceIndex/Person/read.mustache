<div
    role="complementary"
    data-view="map"
    data-focus="{{#scope}}{{@id}}{{/scope}}"
    class="color-scheme-map column-medium"
>
    <div class="hidden">
        <a href="/aggregation/" class="hijax transclude map-view-hidden" target="_self">Aggregations</a>
    </div>
</div>

<div role="main" class="column column-medium color-scheme-text bg-blue-palest">
    <div class="column-container">

        {{#scope}}

            <div class="resource">

                <script type="application/ld+json">
                    {{{.}}}
                </script>

                {{#if user}}
                    <button class="btn btn-inverted resource-edit-btn" data-toggle="modal" data-target="#resource-edit">
                        <i class="fa fa-pencil"></i>
                    </button>
                {{/if}}

                <div class="resource-header">

                    <h1 class="resource-title">
                        <i class="fa fa-user"></i>
                        {{#name}}{{@value}}{{/name}}
                    </h1>

                    {{#countryChampionFor}}
                        <div class="resource-subline">
                            Country Champion for <a href="/country/{{.}}">{{i18n . bundle="countries"}}</a>
                        </div>
                    {{/countryChampionFor}}

                </div>

                {{#image}}
                    <div class="paragraph-image">
                        <a href="{{.}}" target="_blank">
                            <img src="{{.}}" width="150" />
                        </a>
                    </div>
                {{/image}}

                {{#description}}
                    <p>{{{@value}}}</p>
                {{/description}}

                <table class="table resource-details-table">

                    <tr>
                        <td>Email Address</td>
                        <td>
                             <a href="mailto:{{{obfuscate email}}}">{{{obfuscate email}}}</a>
                        </td>
                    </tr>

                    {{#url}}
                        <tr>
                            <td>Personal Website</td>
                            <td>
                                 <a href="{{url}}">{{url}}</a>
                            </td>
                        </tr>
                    {{/url}}

                    {{#location}}
                        <tr>
                            <td>Location</td>
                            <td>
                                {{#location}}
                                    {{>ResourceIndex/Place/read.mustache}}
                                {{/location}}
                            </td>
                        </tr>
                    {{/location}}

                    {{#if affiliation}}
                        <tr>
                            <td>Affiliation</td>
                            <td>
                                <ul class="resource-list truncated">
                                    {{#affiliation}}
                                        <li>{{> (stringFormat "ResourceIndex/%s/link.mustache" @type) }}</li>
                                    {{/affiliation}}
                                </ul>
                            </td>
                        </tr>
                    {{/if}}

                    {{#if sameAs}}
                        <tr>
                            <td>Links</td>
                            <td>
                                <ul class="resource-list truncated">
                                    {{#sameAs}}
                                        <li>{{externalLink .}}</li>
                                    {{/sameAs}}
                                </ul>
                            </td>
                        </tr>
                    {{/if}}

                    {{#if created}}
                        <tr>
                            <td>Author of</td>
                            <td>
                                <ul class="resource-list truncated">
                                    {{#created}}
                                        <li>{{> (stringFormat "ResourceIndex/%s/link.mustache" @type) }}</li>
                                    {{/created}}
                                </ul>
                            </td>
                        </tr>
                    {{/if}}

                    {{#if mainEntityOf}}
                        <tr>
                            <td>Topic of</td>
                            <td>
                                <ul class="resource-list truncated">
                                    {{#mainEntityOf}}
                                        <li>{{> (stringFormat "ResourceIndex/%s/link.mustache" @type) }}</li>
                                    {{/mainEntityOf}}
                                </ul>
                            </td>
                        </tr>
                    {{/if}}

                    {{#if mentionedIn}}
                        <tr>
                            <td>Mentioned in</td>
                            <td>
                                <ul class="resource-list truncated">
                                    {{#mentionedIn}}
                                        <li>{{> (stringFormat "ResourceIndex/%s/link.mustache" @type) }}</li>
                                    {{/mentionedIn}}
                                </ul>
                            </td>
                        </tr>
                    {{/if}}

                    {{#if participantIn}}
                        <tr>
                            <td>Participant in</td>
                            <td>
                                <ul class="resource-list truncated">
                                    {{#participantIn}}
                                        <li>{{> (stringFormat "ResourceIndex/%s/link.mustache" @type) }}</li>
                                    {{/participantIn}}
                                </ul>
                            </td>
                        </tr>
                    {{/if}}

                    {{#if provides}}
                        <tr>
                            <td>Provides</td>
                            <td>
                                <ul class="resource-list truncated">
                                    {{#provides}}
                                        <li>{{> (stringFormat "ResourceIndex/%s/link.mustache" @type) }}</li>
                                    {{/provides}}
                                </ul>
                            </td>
                        </tr>
                    {{/if}}

                    {{#if agentIn}}
                        <tr>
                            <td>Agent in</td>
                            <td>
                                <ul class="resource-list truncated">
                                    {{#agentIn}}
                                        <li>{{> (stringFormat "ResourceIndex/%s/link.mustache" @type) }}</li>
                                    {{/agentIn}}
                                </ul>
                            </td>
                        </tr>
                    {{/if}}

                    {{#if memberOf}}
                        <tr>
                            <td>Member of</td>
                            <td>
                                <ul class="resource-list truncated">
                                    {{#memberOf}}
                                        <li>{{> (stringFormat "ResourceIndex/%s/link.mustache" @type) }}</li>
                                    {{/memberOf}}
                                </ul>
                            </td>
                        </tr>
                    {{/if}}

                </table>

            </div>

        {{/scope}}
    </div>
</div>

<div class="modal fade resource-form-modal" id="resource-edit">
    <div class="modal-dialog">
        <div class="modal-content bg-blue-palest color-scheme-text">
            <div class="modal-body clearfix">

                <h1>Edit Person</h1>

                <form method="post" class="edit">

                    {{> ResourceIndex/Person/edit.mustache scope}}

                    <div class="pull-right resource-form-top-padding">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Quit</button>
                        <button type="submit" class="btn btn-inverted">Save Changes</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>
